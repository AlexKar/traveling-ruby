# Reducing the size of your Traveling Ruby packages

Packages generated by Traveling Ruby can be large, but you can reduce the size of your packages by many megabytes by removing unnecessary files.

## Typically removable files

You can typically safely remove the following files:


    # Remove tests
    rm -rf lib/vendor/ruby/*/gems/*/test
    rm -rf lib/vendor/ruby/*/gems/*/tests
    rm -rf lib/vendor/ruby/*/gems/*/spec
    rm -rf lib/vendor/ruby/*/gems/*/features
    rm -rf lib/vendor/ruby/*/gems/*/benchmark

    # Remove documentation
    rm -f lib/vendor/ruby/*/gems/*/README*
    rm -f lib/vendor/ruby/*/gems/*/CHANGE*
    rm -f lib/vendor/ruby/*/gems/*/Change*
    rm -f lib/vendor/ruby/*/gems/*/COPYING*
    rm -f lib/vendor/ruby/*/gems/*/LICENSE*
    rm -f lib/vendor/ruby/*/gems/*/MIT-LICENSE*
    rm -f lib/vendor/ruby/*/gems/*/*.txt
    rm -f lib/vendor/ruby/*/gems/*/*.md
    rm -f lib/vendor/ruby/*/gems/*/*.rdoc
    rm -rf lib/vendor/ruby/*/gems/*/doc
    rm -rf lib/vendor/ruby/*/gems/*/docs
    rm -rf lib/vendor/ruby/*/gems/*/example
    rm -rf lib/vendor/ruby/*/gems/*/examples
    rm -rf lib/vendor/ruby/*/gems/*/sample
    rm -rf lib/vendor/ruby/*/gems/*/doc-api

    # Remove leftover C source code
    find lib/vendor/ruby -name '*.c' | xargs rm -f
    find lib/vendor/ruby -name '*.h' | xargs rm -f

## Removing gem-specific files

Depending on which gems you use, there may be more files that you can remove. What I typically do is to run `find lib/vendor/ruby | less` to inspect which files exist, and try to identify the files that I think can be removed.

For example, most gems that contain a Rakefile only need those Rakefiles for the purpose of developing those gems. Usually, you can safely remove those Rakefiles without impacting your application. In a similar fashion, the `task` directory within those gems (which typically contain further Rake tasks) can also be removed.

As another example, the `nokogori` gem contains the `suppressions` directory. This directory contains Valgrind suppression files, so if you never use Valgrind (which is very likely) then you can remove that directory too.

As a final example, the `rack` gem contains a `contrib` directory which appears to be only relevant for documentation purposes, so it too can be removed.

When in doubt, you should inspect the gem's source code to check how a file is used and whether you can remove it.
